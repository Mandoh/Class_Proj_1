<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/css/materialize.min.css">
    <link rel="stylesheet" href="./Assets/css/style.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt"
        crossorigin="anonymous">
        <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Abril+Fatface|Cinzel:400,700,900|Gloria+Hallelujah" rel="stylesheet">
    <title>Take-In</title>
</head>

<body>
    <div class="row">
        <form class="col s12">
            <h4>Log in</h4>
            <div class="row">
                <div class="input-field col s12">
                    <input id="email" type="email" class="validate">
                    <label for="email">Email</label>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s12">
                    <input id="password" type="password" class="validate">
                    <label for="password">Password</label>
                </div>
            </div>

            <div class="row">

            </div>
            <button class="btn waves-effect waves-light" type="submit" name="action" id= "button">Submit
                <i class="material-icons right">send</i>
            </button>
            <button class="btnlogout waves-effect waves-light hide" type="submit" name="action" id ="logout">LogOut
                    <i class="material-icons right">logout</i>
                <div class= "logger"></div>

        </form>
    </div>
    <script type="text/javascript"> 

    var config = {
    apiKey: "AIzaSyAg9qttwGz5qzU9c6llBX2IkmCDNHhQ5KU",
    authDomain: "take-in-cbc30.firebaseapp.com",
    databaseURL: "https://take-in-cbc30.firebaseio.com",
    projectId: "take-in-cbc30",
    storageBucket: "take-in-cbc30.appspot.com",
    messagingSenderId: "482325799781"
  };
  firebase.initializeApp(config);

  
           
           auth = firebase.auth();

           var email;
           var password;
           var promise;
           var button = document.getElementById('button')
           var btnlogout = document.getElementById('logout')
           var emailId = document.getElementById('email');
           var passwordId = document.getElementById('password')
           button.addEventListener("click", e => {
               e.preventDefault();
               // get email & password
              email = $("#email").val();
              password = $("#password").val();
                 // firebase authentication 
             promise =  auth.signInWithEmailAndPassword(email,password)
               promise.catch( e => console.log(e.message));
            

           });

           firebase.auth().onAuthStateChanged(firebaseUser => {
               if (firebaseUser){
                   console.log(firebaseUser);
                   btnlogout.classList.remove('hide');
                   }
                   else{
                       console.log("not Logged In")
                       btnlogout.classList.add('hide');
                   }


           });



          





           

    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/js/materialize.min.js"></script>

</body>

</html>